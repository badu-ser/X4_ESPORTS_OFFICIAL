<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Your existing head content -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>X4 eSports India- Register</title>
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css">
    <link rel="stylesheet" href="assets/css/bootstrap4-neon-glow.min.css">
    <link rel="stylesheet" href="assets/css/main.css">
    <link rel="stylesheet" href="assets/css/particles.css">
    <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet">
    <link rel='stylesheet' href='https://cdn.jsdelivr.net/font-hack/2.020/css/hack.min.css'>
</head>
<body>
    <div id="particles-js"></div>

    <div class="navbar-dark text-white">
        <!-- Your existing navbar -->
    </div>

    <div class="container py-5 mb-5">
        <h1 class="mb-5" style="text-align: center">Register yourself or your team for the Epic Tournament<span class="vim-caret">͏͏&nbsp;&nbsp;</span></h1>
        <div class="row py-4">
            <div class="col-md-8 order-md-2">
                <h4 class="mb-3">PLAYER/TEAM INFO</h4>
                <form id="registrationForm" class="needs-validation" novalidate>
                    <!-- Your existing form fields -->
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label for="firstName">First name</label>
                            <input type="text" class="form-control" id="firstName" name="firstName" required>
                            <div class="invalid-feedback">Valid first name is required.</div>
                        </div>
                        <div class="col-md-6 mb-3">
                            <label for="lastName">Last name</label>
                            <input type="text" class="form-control" id="lastName" name="lastName" required>
                            <div class="invalid-feedback">Valid last name is required.</div>
                        </div>
                    </div>

                    <!-- Rest of your form fields... -->

                    <hr class="mb-4">
                    <div class="custom-control custom-checkbox">
                        <input type="checkbox" class="custom-control-input" id="solemnly-swear" required>
                        <label class="custom-control-label" for="solemnly-swear">I am ready for the epic warfare.</label>
                    </div>
                    <hr class="mb-4">
                    <button class="btn btn-outline-success btn-shadow btn-lg btn-block" type="submit">Submit</button>
                </form>
            </div>
        </div>
    </div>

    <!-- Add this script section -->
    <script>
    document.getElementById('registrationForm').addEventListener('submit', async (e) => {
        e.preventDefault();
        
        const form = e.target;
        const formData = new FormData(form);
        
        try {
            const response = await fetch('https://x4esports.42web.io/regdata.php', {
                method: 'POST',
                body: formData
            });

            const result = await response.json();

            if (!response.ok) {
                throw new Error(result.errors?.join('\n') || result.error || 'Unknown error');
            }

            // Redirect to success page
            window.location.href = 'success.html';
            
        } catch (error) {
            alert(`Error: ${error.message}`);
        }
    });

    // Bootstrap validation
    (function() {
        'use strict';
        window.addEventListener('load', function() {
            const forms = document.getElementsByClassName('needs-validation');
            Array.prototype.filter.call(forms, function(form) {
                form.addEventListener('submit', function(event) {
                    if (form.checkValidity() === false) {
                        event.preventDefault();
                        event.stopPropagation();
                    }
                    form.classList.add('was-validated');
                }, false);
            });
        }, false);
    })();
    </script>

    <!-- Your existing scripts -->
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/js/bootstrap.min.js"></script>
    <script src="assets/js/particles.js"></script>
    <script src="assets/js/app.js"></script>
</body>
                              </html>
